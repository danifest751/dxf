<!doctype html>
<html lang="ru">
<head>
  <link rel="icon" type="image/svg+xml" href="./favicon.svg">
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DXF PRO ‚Äî —Ä–µ–∑–∫–∞, –≤—Ä–µ–∑–∫–∏, —Ä–∞—Å–∫–ª–∞–¥–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
<div class="wrap">
  <header>
    <h1>DXF PRO ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∑–∫–∏, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∞</h1>
    <p>–í—Ä–µ–∑–∫–∏ –Ω–∞ –∫–æ–Ω—Ç—É—Ä–µ ‚Ä¢ –±—ã—Å—Ç—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä ‚Ä¢ hover-–ø–æ–¥—Å–≤–µ—Ç–∫–∞ ‚Ä¢ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç—É—Ä—ã –∏ –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–∑–∞ ‚Ä¢ —ç–∫—Å–ø–æ—Ä—Ç DXF/SVG/CSV ‚Ä¢ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞</p>
  </header>

  <div class="grid">
    <div class="panel">
      <div class="body">
        <div id="drop" class="file-drop">
          <input id="file" type="file" accept=".dxf" hidden />
          <div>üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏ DXF —Å—é–¥–∞ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏</div>
          <div class="note">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ LINE / CIRCLE / ARC / LWPOLYLINE / POLYLINE</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <label for="file" id="openBtn" class="btn">–û—Ç–∫—Ä—ã—Ç—å DXF</label>
          <button id="runTests" class="btn">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
        </div>

        <div id="status" class="status warn" hidden>–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ</div>


<!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
<div class="section-title">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
<div class="card">
  <div class="kv"><span>–î–æ–ø—É—Å–∫ —Å—Ç—ã–∫–æ–≤–∫–∏</span>
    <b><select id="pierceEps">
      <option value="0.3">0.3 –º–º (—Å—Ç—Ä–æ–≥–æ)</option>
      <option value="0.8" selected>0.8 –º–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
      <option value="1.5">1.5 –º–º (–º—è–≥–∫–æ)</option>
    </select></b>
  </div>


<!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ DXF -->
<div class="section-title">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ DXF</div>
<div class="card" id="libCard">
  <div class="row" style="margin-bottom:8px">
    <button class="btn" id="libImportBtn">–ò–º–ø–æ—Ä—Ç DXF</button>
    <button class="btn" id="libSaveCurrentBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π</button>
  </div>
  <div class="row" id="dxfDirRow" style="margin-bottom:8px; gap:8px; flex-wrap:wrap">
    <button class="btn" id="libPickDirBtn">–ü–∞–ø–∫–∞ DXF‚Ä¶</button>
    <button class="btn" id="libScanBtn">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
    <label style="display:flex;align-items:center;gap:6px"><input type="checkbox" id="libAutoImport"> –ê–≤—Ç–æ-–∏–º–ø–æ—Ä—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ</label>
    <span id="libDirName" style="opacity:.7"></span>
  </div>
  <input type="file" id="libImport" accept=".dxf" multiple style="display:none">
  <div class="kv" style="padding-top:0">
    <input id="libSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏‚Ä¶" style="width:100%;padding:8px 10px;border-radius:8px;border:1px solid #31405e;background:#0b111d;color:#e6ebff">
  </div>
  <div id="libList" style="max-height:220px; overflow:auto; margin-top:6px;"></div>
</div>



  <div class="kv"><span>–ü–æ–¥–ø–∏—Å–∏ P#</span>
    <b><label><input type="checkbox" id="showLabels" checked> –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å</label></b>
  </div>
</div>




        <div class="section-title">–¶–µ–Ω—ã</div>
        <div class="row">
          <div><label>–¶–µ–Ω–∞ –∑–∞ –º–µ—Ç—Ä, ‚ÇΩ/–º</label><input id="pPerM" type="number" step="0.01" value="100"></div>
          <div><label>–¶–µ–Ω–∞ –∑–∞ –≤—Ä–µ–∑–∫—É, ‚ÇΩ/—à—Ç</label><input id="pPierce" type="number" step="0.01" value="50"></div>
        </div>

        <div class="section-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∑–∫–∏</div>
        <div class="row">
          <div>
            <label>–ú–æ—â–Ω–æ—Å—Ç—å</label>
            <select id="power">
              <option value="0.5">0.5 –∫–í—Ç</option>
              <option value="1">1.0 –∫–í—Ç</option>
              <option value="1.5" selected>1.5 –∫–í—Ç</option>
              <option value="2">2.0 –∫–í—Ç</option>
            </select>
          </div>
          <div>
            <label>–ì–∞–∑</label>
            <select id="gas">
              <option value="oxygen">–ö–∏—Å–ª–æ—Ä–æ–¥ (O‚ÇÇ)</option>
              <option value="nitrogen" selected>–ê–∑–æ—Ç (N‚ÇÇ)</option>
              <option value="air">–°–∂–∞—Ç—ã–π –≤–æ–∑–¥—É—Ö</option>
            </select>
          </div>
        </div>
        <div>
          <label>–¢–æ–ª—â–∏–Ω–∞: <span id="tVal">3.0</span> –º–º</label>
          <input id="th" type="range" min="0.5" max="25" step="0.1" value="3.0" />
        </div>
        <div class="row">
          <div><label>–°–∫–æ—Ä–æ—Å—Ç—å (–º–º/–º–∏–Ω)</label><input id="cutSpd" type="number" value="2000" readonly></div>
          <div><label>–í—Ä–µ–º—è –≤—Ä–µ–∑–∫–∏ (—Å)</label><input id="pierceSec" type="number" value="1.5" readonly></div>
        </div>
        <div class="row">
          <div><label>–ì–∞–∑, ‚ÇΩ/–º–∏–Ω</label><input id="gasPrice" type="number" value="15" step="0.1"></div>
          <div><label>–ú–∞—à–∏–Ω–æ-—á–∞—Å, ‚ÇΩ/—á</label><input id="machPrice" type="number" value="1200" step="50"></div>
        </div>

        <div class="section-title">–õ–∏—Å—Ç –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</div>
        <div class="row-3">
          <div><label>–®–∏—Ä–∏–Ω–∞ –ª–∏—Å—Ç–∞, –º–º</label><input id="sW" type="number" value="1500"></div>
          <div><label>–í—ã—Å–æ—Ç–∞ –ª–∏—Å—Ç–∞, –º–º</label><input id="sH" type="number" value="3000"></div>
          <div><label>–ö–æ–ª-–≤–æ –¥–µ—Ç–∞–ª–µ–π</label><input id="qty" type="number" value="1" min="1"></div>
        </div>
        <div class="row">
          <div><label>–û—Ç—Å—Ç—É–ø, –º–º</label><input id="margin" type="number" value="10"></div>
          <div><label>–ó–∞–∑–æ—Ä, –º–º</label><input id="spacing" type="number" value="5"></div>
        </div>
        <div class="row">
          <div><label>–ü–æ–≤–æ—Ä–æ—Ç—ã</label>
            <select id="rotations">
              <option value="0,90" selected>0¬∞/90¬∞</option>
              <option value="0,90,180">0¬∞/90¬∞/180¬∞</option>
              <option value="0,90,180,270">0¬∞/90¬∞/180¬∞/270¬∞</option>
            </select>
          </div>
          <div style="display:flex; align-items:flex-end; gap:8px">
            <button id="calc" class="btn primary" disabled>üîÑ –ü–æ—Å—á–∏—Ç–∞—Ç—å</button>
            <button id="nest" class="btn" disabled>üì¶ –†–∞—Å–∫–ª–∞–¥–∫–∞</button>
          </div>
        </div>

        <div class="section-title">–≠–∫—Å–ø–æ—Ä—Ç</div>
        <div id="dl" style="display:flex;gap:8px;flex-wrap:wrap" hidden>
          <button id="dlOrig" class="btn" disabled>‚¨áÔ∏è DXF (–æ—Ä–∏–≥.)</button>
          <button id="dlAnn" class="btn" disabled>‚¨áÔ∏è DXF (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)</button>
          <button id="dlDXFMarkers" class="btn" disabled>‚¨áÔ∏è DXF (–º–∞—Ä–∫–µ—Ä–Ω—ã–π —Å–ª–æ–π)</button>
          <button id="dlSVG" class="btn" disabled>‚¨áÔ∏è SVG</button>
          <button id="dlCSV" class="btn" disabled>‚¨áÔ∏è CSV</button>
          <button id="dlReport" class="btn" disabled>‚¨áÔ∏è –û—Ç—á—ë—Ç</button>
        </div>

        <div class="tests card" id="testsCard" hidden>
          <h3>üß™ –¢–µ—Å—Ç—ã</h3>
          <div id="testsOut" class="note">–ï—â—ë –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å</div>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="canvas-wrap">
        <div class="tabs">
          <div class="tab active" data-tab="orig">–ò—Å—Ö–æ–¥–Ω—ã–π DXF</div>
          <div class="tab" data-tab="annot">–ê–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</div>
          <div class="tab" data-tab="nest">–†–∞—Å–∫–ª–∞–¥–∫–∞</div>
          <div style="margin-left:auto;padding:10px 12px" class="pill" id="zoomHint">–ö–æ–ª–µ—Å–æ: –∑—É–º, –õ–ö–ú: –ø–∞–Ω–æ—Ä–∞–º–∞</div>
        </div>
        <div class="canvas-holder">
          <div id="cvWrap" class="cv-wrap">
  <canvas id="cv"></canvas>
  <canvas id="cvAnn"></canvas>
</div>
          <div id="tooltip" class="tooltip" style="display:none"></div>
        </div>
      </div>

      <div class="body">
        <div class="cards" id="cards">
          <div class="card" id="cGeom"><h3>üìè –ì–µ–æ–º–µ—Ç—Ä–∏—è</h3><div class="kv"><span>–î–ª–∏–Ω–∞ —Ä–µ–∑–∞</span><b id="mLen">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierce">‚Äî</b></div><div class="kv"><span>–û–±—ä–µ–∫—Ç–æ–≤</span><b id="mEnt">‚Äî</b></div></div>
          <div class="card" id="cTime"><h3>‚è±Ô∏è –í—Ä–µ–º—è</h3><div class="kv"><span>–†–µ–∑–∫–∞</span><b id="mCutMin">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierceMin">‚Äî</b></div><div class="kv"><span>–ò—Ç–æ–≥–æ</span><b id="mTotalMin">‚Äî</b></div></div>
          <div class="card" id="cCost"><h3>üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –¥–µ—Ç–∞–ª—å</h3><div class="kv"><span>–†–µ–∑–∫–∞</span><b id="mCutRub">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierceRub">‚Äî</b></div><div class="kv"><span>–ì–∞–∑</span><b id="mGasRub">‚Äî</b></div><div class="kv"><span>–ú–∞—à–∏–Ω–æ-–≤—Ä–µ–º—è</span><b id="mMachRub">‚Äî</b></div><div class="kv"><span><b>–ò–¢–û–ì–û</b></span><b id="mTotalRub">‚Äî</b></div></div>
        </div>
        <div class="card" id="nestCard" hidden>
          <h3>üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–∫–ª–∞–¥–∫–∏</h3>
          <div class="kv"><span>–ù–∞ –ª–∏—Å—Ç–µ (—à—Ç)</span><b id="nPlaced">‚Äî</b></div>
          <div class="kv"><span>–ù—É–∂–Ω–æ –ª–∏—Å—Ç–æ–≤</span><b id="nSheets">‚Äî</b></div>
          <div class="kv"><span>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span><b id="nEff">‚Äî</b></div>
          <div class="kv"><span>–í—Ä–µ–º—è –Ω–∞ –ª–∏—Å—Ç</span><b id="nTime">‚Äî</b></div>
          <div class="kv"><span>–°—Ç–æ–∏–º–æ—Å—Ç—å –ª–∏—Å—Ç–∞</span><b id="nCost">‚Äî</b></div>
          <div class="kv"><span>–ü–æ–≤–æ—Ä–æ—Ç</span><b id="nRot">‚Äî</b></div>
          <div class="note">–†–∞—Å–∫–ª–∞–¥–∫–∞ —Å–µ—Ç–æ—á–Ω–∞—è, –ø–æ–≤–æ—Ä–æ—Ç—ã –≤—ã–±–æ—Ä–æ–º 0/90/180/270 (180 –∏ 0, 270 –∏ 90 —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã –ø–æ –≥–∞–±–∞—Ä–∏—Ç—É).</div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="module" src="./main.js"></script>
  <script type="module" src="./library.js"></script>
</body>
</html>
