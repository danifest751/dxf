<!doctype html>
<html lang="ru">
<head>
  <link rel="icon" type="image/svg+xml" href="./favicon.svg">
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DXF PRO ‚Äî –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∑–∫–∏</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
<div class="wrap">
  <header>
    <h1>üõ†Ô∏è DXF PRO ‚Äî –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
    <p>üéØ –í—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã ‚Ä¢ üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä ‚Ä¢ üé® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Ä¢ üìä –£–º–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞</p>
  </header>

  <div class="grid">
    <div class="panel">
      <div class="body">
        <div id="drop" class="file-drop">
          <input id="file" type="file" accept=".dxf" multiple hidden />
          <div style="font-size: 18px; margin-bottom: 8px;">üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ DXF —Ñ–∞–π–ª—ã —Å—é–¥–∞</div>
          <div style="font-size: 14px; opacity: 0.7;">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)</div>
          <div class="note" style="margin-top: 12px;">üîß –ü–æ–¥–¥–µ—Ä–∂–∫–∞: LINE, CIRCLE, ARC, LWPOLYLINE, POLYLINE</div>
        </div>
        
        <!-- File tabs container -->
        <div id="fileTabs" class="file-tabs" style="display:none; margin-top: 16px;">
          <div class="file-tabs-header">
            <span class="tabs-title">üìÅ –§–∞–π–ª—ã:</span>
            <div class="file-tabs-actions">
              <button id="multiFileNestBtn" class="btn btn-small" title="–†–∞—Å–∫–ª–∞–¥–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤">üì¶ –†–∞—Å–∫–ª–∞–¥–∫–∞</button>
              <button id="addFileBtn" class="btn btn-small" title="–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª">‚ûï</button>
            </div>
          </div>
          <div id="fileTabsList" class="file-tabs-list"></div>
        </div>
        <div style="display:flex;gap:12px;margin-top:16px">
          <label for="file" id="openBtn" class="btn">üìÇ –û—Ç–∫—Ä—ã—Ç—å DXF</label>
          <button id="runTests" class="btn">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
        </div>

        <div id="status" class="status warn" hidden>–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ</div>

        <div class="section-title">üí∞ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
        <div class="row">
          <div><label>üíµ –¶–µ–Ω–∞ –∑–∞ –º–µ—Ç—Ä, ‚ÇΩ/–º</label><input id="pPerM" type="number" step="0.01" value="100" readonly></div>
          <div><label>üî© –¶–µ–Ω–∞ –∑–∞ –≤—Ä–µ–∑–∫—É, ‚ÇΩ/—à—Ç</label><input id="pPierce" type="number" step="0.01" value="50" readonly></div>
        </div>

        <div class="section-title">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∑–∫–∏</div>
        <div class="row">
          <div>
            <label>–ú–æ—â–Ω–æ—Å—Ç—å</label>
            <select id="power">
              <option value="0.5">0.5 –∫–í—Ç</option>
              <option value="1">1.0 –∫–í—Ç</option>
              <option value="1.5" selected>1.5 –∫–í—Ç</option>
              <option value="2">2.0 –∫–í—Ç</option>
            </select>
          </div>
          <div>
            <label>–ì–∞–∑</label>
            <select id="gas">
              <option value="oxygen">–ö–∏—Å–ª–æ—Ä–æ–¥ (O‚ÇÇ)</option>
              <option value="nitrogen" selected>–ê–∑–æ—Ç (N‚ÇÇ)</option>
              <option value="air">–°–∂–∞—Ç—ã–π –≤–æ–∑–¥—É—Ö</option>
            </select>
          </div>
        </div>
        <div>
          <label>‚öôÔ∏è –¢–æ–ª—â–∏–Ω–∞ –º–µ—Ç–∞–ª–ª–∞, –º–º</label>
          <select id="th">
            <option value="0.5">0.5 –º–º</option>
            <option value="0.6">0.6 –º–º</option>
            <option value="0.7">0.7 –º–º</option>
            <option value="0.8">0.8 –º–º</option>
            <option value="1">1.0 –º–º</option>
            <option value="1.5">1.5 –º–º</option>
            <option value="2">2.0 –º–º</option>
            <option value="3" selected>3.0 –º–º</option>
            <option value="5">5.0 –º–º</option>
            <option value="6">6.0 –º–º</option>
          </select>
        </div>
        <div class="row">
          <div><label>–°–∫–æ—Ä–æ—Å—Ç—å (–º–º/–º–∏–Ω)</label><input id="cutSpd" type="number" value="2000" readonly></div>
          <div><label>–í—Ä–µ–º—è –≤—Ä–µ–∑–∫–∏ (—Å)</label><input id="pierceSec" type="number" value="1.5" readonly></div>
        </div>
        <div class="row">
          <div><label>–ì–∞–∑, ‚ÇΩ/–º–∏–Ω</label><input id="gasPrice" type="number" value="15" step="0.1" readonly></div>
          <div><label>–ú–∞—à–∏–Ω–æ-—á–∞—Å, ‚ÇΩ/—á</label><input id="machPrice" type="number" value="1200" step="50" readonly></div>
        </div>

        <div class="section-title">–õ–∏—Å—Ç –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</div>
        <div class="row-3">
          <div><label>–®–∏—Ä–∏–Ω–∞ –ª–∏—Å—Ç–∞, –º–º</label><input id="sW" type="number" value="1500"></div>
          <div><label>–í—ã—Å–æ—Ç–∞ –ª–∏—Å—Ç–∞, –º–º</label><input id="sH" type="number" value="3000"></div>
          <div><label>–ö–æ–ª-–≤–æ –¥–µ—Ç–∞–ª–µ–π</label><input id="qty" type="number" value="1" min="1"></div>
        </div>
        <div class="row">
          <div><label>–û—Ç—Å—Ç—É–ø, –º–º</label><input id="margin" type="number" value="10"></div>
          <div><label>–ó–∞–∑–æ—Ä, –º–º</label><input id="spacing" type="number" value="5"></div>
        </div>
        <div class="row">
          <div><label>–ü–æ–≤–æ—Ä–æ—Ç—ã</label>
            <select id="rotations">
              <option value="0,90" selected>0¬∞/90¬∞</option>
              <option value="0,90,180">0¬∞/90¬∞/180¬∞</option>
              <option value="0,90,180,270">0¬∞/90¬∞/180¬∞/270¬∞</option>
            </select>
          </div>
          <div style="display:flex; align-items:flex-end; gap:8px">
            <button id="calc" class="btn primary" disabled>üîÑ –ü–æ—Å—á–∏—Ç–∞—Ç—å</button>
            <button id="nest" class="btn" disabled style="display: none;">üì¶ –†–∞—Å–∫–ª–∞–¥–∫–∞</button>
          </div>
        </div>

        <div class="section-title collapsible-header" id="exportHeader">
          <span>üì§ –≠–∫—Å–ø–æ—Ä—Ç</span>
          <button class="toggle-btn" id="exportToggle" title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —ç–∫—Å–ø–æ—Ä—Ç">‚ñ∂</button>
        </div>
        <div id="exportContent" class="collapsible-content" style="display:none;">
          <div id="dl" style="display:flex;gap:8px;flex-wrap:wrap" hidden>
            <button id="dlOrig" class="btn" disabled>‚¨áÔ∏è DXF (–æ—Ä–∏–≥.)</button>
            <button id="dlAnn" class="btn" disabled>‚¨áÔ∏è DXF (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)</button>
            <button id="dlDXFMarkers" class="btn" disabled>‚¨áÔ∏è DXF (–º–∞—Ä–∫–µ—Ä–Ω—ã–π —Å–ª–æ–π)</button>
            <button id="dlSVG" class="btn" disabled>‚¨áÔ∏è SVG</button>
            <button id="dlCSV" class="btn" disabled>‚¨áÔ∏è CSV</button>
            <button id="dlReport" class="btn" disabled>‚¨áÔ∏è –û—Ç—á—ë—Ç</button>
          </div>
        </div>

        <div class="tests card" id="testsCard" hidden>
          <h3>üß™ –¢–µ—Å—Ç—ã</h3>
          <div id="testsOut" class="note">–ï—â—ë –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å</div>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="canvas-wrap">
        <div class="tabs">
          <div class="tab active" data-tab="orig">–ò—Å—Ö–æ–¥–Ω—ã–π DXF</div>
          <div class="tab" data-tab="annot">–ê–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</div>
          <div class="tab" data-tab="nest">–†–∞—Å–∫–ª–∞–¥–∫–∞</div>
          <div style="margin-left:auto;padding:10px 12px" class="pill" id="zoomHint">–ö–æ–ª–µ—Å–æ: –∑—É–º, –õ–ö–ú: –ø–∞–Ω–æ—Ä–∞–º–∞</div>
        </div>
        <div class="canvas-holder">
          <canvas id="cv"></canvas>
          <div id="tooltip" class="tooltip" style="display:none"></div>
        </div>
      </div>

      <div class="body">
        <div class="cards" id="cards">
          <div class="card" id="cGeom"><h3>üìè –ì–µ–æ–º–µ—Ç—Ä–∏—è</h3><div class="kv"><span>–î–ª–∏–Ω–∞ —Ä–µ–∑–∞</span><b id="mLen">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierce">‚Äî</b></div><div class="kv"><span>–û–±—ä–µ–∫—Ç–æ–≤</span><b id="mEnt">‚Äî</b></div></div>
          <div class="card" id="cTime"><h3>‚è±Ô∏è –í—Ä–µ–º—è</h3><div class="kv"><span>–†–µ–∑–∫–∞</span><b id="mCutMin">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierceMin">‚Äî</b></div><div class="kv"><span>–ò—Ç–æ–≥–æ</span><b id="mTotalMin">‚Äî</b></div></div>
          <div class="card" id="cCost"><h3>üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –¥–µ—Ç–∞–ª—å</h3><div class="kv"><span>–†–µ–∑–∫–∞</span><b id="mCutRub">‚Äî</b></div><div class="kv"><span>–í—Ä–µ–∑–∫–∏</span><b id="mPierceRub">‚Äî</b></div><div class="kv"><span>–ì–∞–∑</span><b id="mGasRub">‚Äî</b></div><div class="kv"><span>–ú–∞—à–∏–Ω–æ-–≤—Ä–µ–º—è</span><b id="mMachRub">‚Äî</b></div><div class="kv"><span><b>–ò–¢–û–ì–û</b></span><b id="mTotalRub">‚Äî</b></div></div>
        </div>
        <div class="card" id="nestCard" hidden>
          <h3>üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å–∫–ª–∞–¥–∫–∏</h3>
          <div class="kv"><span>–ù–∞ –ª–∏—Å—Ç–µ (—à—Ç)</span><b id="nPlaced">‚Äî</b></div>
          <div class="kv"><span>–ù—É–∂–Ω–æ –ª–∏—Å—Ç–æ–≤</span><b id="nSheets">‚Äî</b></div>
          <div class="kv"><span>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span><b id="nEff">‚Äî</b></div>
          <div class="kv"><span>–í—Ä–µ–º—è –Ω–∞ –ª–∏—Å—Ç</span><b id="nTime">‚Äî</b></div>
          <div class="kv"><span>–°—Ç–æ–∏–º–æ—Å—Ç—å –ª–∏—Å—Ç–∞</span><b id="nCost">‚Äî</b></div>
          <div class="kv"><span>–ü–æ–≤–æ—Ä–æ—Ç</span><b id="nRot">‚Äî</b></div>
          <div class="note">–†–∞—Å–∫–ª–∞–¥–∫–∞ —Å–µ—Ç–æ—á–Ω–∞—è, –ø–æ–≤–æ—Ä–æ—Ç—ã –≤—ã–±–æ—Ä–æ–º 0/90/180/270 (180 –∏ 0, 270 –∏ 90 —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã –ø–æ –≥–∞–±–∞—Ä–∏—Ç—É).</div>
        </div>
        
        <div class="card" id="multiFileCard" style="display: none;">
          <h3>üìÑ –ú—É–ª—å—Ç–∏—Ñ–∞–π–ª–æ–≤–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞</h3>
          
          <div class="kv">
            <span>–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤</span>
            <b id="multiFileTotalFiles">‚Äî</b>
          </div>
          
          <div class="kv">
            <span>–í—Å–µ–≥–æ –¥–µ—Ç–∞–ª–µ–π</span>
            <b id="multiFileTotalParts">‚Äî</b>
          </div>
          
          <div class="kv">
            <span>–õ–∏—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è</span>
            <b id="multiFileSheets">‚Äî</b>
          </div>
          
          <div class="kv">
            <span>–û–±—â–µ–µ –≤—Ä–µ–º—è</span>
            <b id="multiFileTime">‚Äî</b>
          </div>
          
          <div class="kv">
            <span>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</span>
            <b id="multiFileCost">‚Äî</b>
          </div>
          
          <div style="display: flex; gap: 8px; margin-top: 12px;">
            <button id="calculateMultiFile" class="btn">üîÑ –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –≤—Å—ë</button>
            <button id="globalNesting" class="btn">üì¶ –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞</button>
          </div>
          
          <div class="note" style="margin-top: 12px;">
            –†–∞—Å—á–µ—Ç –≤–µ–¥–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ. –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π –Ω–∞ –æ–±—â–∏—Ö –ª–∏—Å—Ç–∞—Ö.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="module" src="./main.js"></script>
</body>
</html>
