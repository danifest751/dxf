:root{--bg:#0b0d12;--panel:#111522;--muted:#74809a;--card:#0f1420;--primary:#6d8cff;--accent:#9d7bff;--ok:#2ecc71;--warn:#ffcd3c;--err:#ff5c5c;--ring:#26304a}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;font:14px/1.4 system-ui,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:#e6ebff}
.wrap{max-width:1200px;margin:0 auto;padding:20px}
header{background:linear-gradient(135deg,var(--primary),var(--accent));padding:16px 20px;border-radius:16px;margin-bottom:16px}
header h1{margin:0 0 6px;font-size:20px} header p{margin:0;opacity:.9}
.grid{display:grid;grid-template-columns:360px 1fr;gap:16px} @media (max-width:980px){.grid{grid-template-columns:1fr}}
.panel{background:var(--panel);border:1px solid var(--ring);border-radius:16px}
.panel .body{padding:16px}
.section-title{font-weight:700;margin:16px 0 8px;font-size:13px;color:var(--muted)}
.file-drop{border:1px dashed #44507a;border-radius:12px;padding:18px;text-align:center;cursor:pointer;background:var(--card)}
.file-drop:hover{border-color:var(--primary)}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
input[type=number],select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #31405e;background:#0b111d;color:#e6ebff}
input[type=range]{width:100%}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:10px 12px;border-radius:10px;border:1px solid #304066;background:#141a2a;color:#fff;cursor:pointer}
.btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:0}
.btn:disabled{opacity:.5;cursor:not-allowed}
.status{padding:10px 12px;border-radius:10px;margin-top:10px}
.status.ok{background:#14251b;border:1px solid #1d6a3a}
.status.warn{background:#2a230a;border:1px solid #806d1a}
.status.err{background:#2a0f12;border:1px solid #7a2c36}
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px} @media (max-width:980px){.cards{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--ring);border-radius:14px;padding:12px}
.card h3{margin:0 0 8px;font-size:14px;color:#c6cff9}
.kv{display:flex;justify-content:space-between;padding:6px 0;border-top:1px dashed #233052}
.kv:first-of-type{border-top:0}
.tabs{display:flex;border-bottom:1px solid var(--ring)}
.tab{padding:10px 12px;cursor:pointer;border-bottom:2px solid transparent;color:#b8c3f5}
.tab.active{border-color:var(--primary);color:#fff}
.canvas-wrap{height:520px;display:grid;grid-template-rows:auto 1fr}
.canvas-holder{position:relative}
#cv{width:100%;height:100%;display:block;background:#0a0e18}
#cvAnn{width:100%;height:100%;display:block;background:transparent}
.note{font-size:12px;color:#74809a}
.pill{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;background:#0e1a33;border:1px solid #223058;color:#9db4ff;font-size:12px}
.tests{margin-top:10px}.test-pass{color:#a6f3c1}.test-fail{color:#ff9b9b}
.tooltip{position:absolute;top:0;left:0;transform:translate(-50%,-120%);background:#0f1420;border:1px solid #333f62;border-radius:8px;padding:6px 8px;font-size:12px;white-space:nowrap;pointer-events:none;box-shadow:0 4px 16px rgba(0,0,0,.35)}
.tooltip b{color:#fff}


/* Library list */
.lib-item{display:flex;align-items:center;justify-content:space-between;padding:8px 8px;border:1px solid #26304a;border-radius:10px;background:#0f1420;margin-bottom:6px;gap:8px}
.lib-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:55%}
.lib-meta{font-size:12px;color:#74809a}
.lib-actions{display:flex;gap:6px}
.lib-actions .btn{padding:6px 8px;font-size:12px}


/* Icon buttons for library */
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border:1px solid #26304a;border-radius:8px;background:#0f1420;color:#cdd6f4;cursor:pointer}
.icon-btn svg{width:18px;height:18px;fill:currentColor}
.icon-btn:hover{background:#141b2b;border-color:#3a4767}
.icon-btn:active{transform:translateY(1px)}


/* overlay canvases */
.cv-wrap{position:relative; width:100%; height:100%}
#cv, #cvAnn{position:absolute; left:0; top:0; width:100%; height:100%; display:block}
#cvAnn{pointer-events:none}


/* Library layout: actions under the filename */
#libList .item{display:flex; flex-direction:column; align-items:flex-start; gap:4px}
#libList .lib-title{font-weight:600; line-height:1.2}
#libList .lib-meta{opacity:.75; font-size:.9em}
#libList .lib-actions-under{display:flex; gap:6px; margin-top:6px; flex-wrap:wrap}



/* Force library actions under title */
#libList .lib-item{ display:flex !important; flex-direction:column !important; align-items:flex-start !important; gap:6px !important; width:100% }
#libList .lib-item .lib-title{ max-width:100% !important; overflow:visible }
#libList .lib-item .lib-actions{ display:flex !important; flex-wrap:wrap; gap:6px; margin-top:6px; width:100%; order:3 }
#libList .lib-item .lib-meta{ display:none !important }
