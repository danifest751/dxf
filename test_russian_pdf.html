<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russian PDF Test - DXF PRO</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1e293b; 
            color: #f1f5f9; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            background: #334155; 
            border-radius: 8px; 
        }
        button { 
            padding: 10px 20px; 
            margin: 10px 5px; 
            border: none; 
            border-radius: 4px; 
            background: #3b82f6; 
            color: white; 
            cursor: pointer; 
        }
        button:hover { background: #2563eb; }
        button:disabled { background: #64748b; cursor: not-allowed; }
        .preview { 
            background: #0f172a; 
            padding: 15px; 
            border-radius: 4px; 
            margin-top: 10px; 
            font-family: monospace; 
            border: 1px solid #475569;
        }
        .russian { color: #10b981; }
        .transliterated { color: #fbbf24; }
        .icon-test { color: #f472b6; }
    </style>
</head>
<body>
    <h1>üß™ Russian PDF & DXF Icons Test</h1>
    
    <div class="test-section">
        <h2>Russian Text & DXF Icon PDF Test</h2>
        <p>This test will generate a PDF with Russian text using improved encoding methods and enhanced DXF icons.</p>
        
        <button id="testPDF" onclick="testEnhancedPDF()">Generate Enhanced PDF Report</button>
        
        <div class="preview" id="preview">
            <div><strong>What will be tested in PDF:</strong></div><br>
            <div class="russian">üá∑üá∫ Russian Text Examples:</div>
            <div>‚Ä¢ –û—Ç—á–µ—Ç –ø–æ —Ä–∞—Å–∫–ª–∞–¥–∫–µ</div>
            <div>‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏—Å—Ç–æ–≤</div>
            <div>‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
            <div>‚Ä¢ –î–∞–Ω–Ω—ã–µ –ø–æ –¥–µ—Ç–∞–ª–∏</div><br>
            
            <div class="icon-test">üìÑ DXF Icon Examples:</div>
            <div>‚Ä¢ Enhanced vector icon (rectangle + corner fold + lines)</div>
            <div>‚Ä¢ Emoji fallback: üìÑ DXF</div>
            <div>‚Ä¢ Text fallback: [DXF]</div><br>
            
            <div class="transliterated">‚ö° Fallback Transliteration (if needed):</div>
            <div>‚Ä¢ –û—Ç—á–µ—Ç ‚Üí Otchet</div>
            <div>‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚Üí Kolichestvo</div>
            <div>‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Üí Effektivnost</div>
        </div>
    </div>

    <script type="module">
        import { generatePDFReport } from './pdf-export.js';
        
        window.testEnhancedPDF = async function() {\n            const button = document.getElementById('testPDF');\n            button.disabled = true;\n            button.textContent = 'Generating...';\n            \n            try {\n                // Create comprehensive test data with Russian text\n                const mockState = {\n                    parsed: {\n                        totalLen: 4.750,\n                        pierceCount: 12,\n                        entities: ['line1', 'line2', 'arc1', 'circle1']\n                    }\n                };\n                \n                const mockLayout = {\n                    sheets: 3,\n                    totalSheets: 3,\n                    efficiency: 82.3\n                };\n                \n                const mockFiles = [\n                    {\n                        name: 'test_–¥–µ—Ç–∞–ª—å_01.dxf',\n                        parsed: {\n                            totalLen: 2.450,\n                            pierceCount: 8,\n                            entities: ['line1', 'line2']\n                        },\n                        settings: {\n                            thickness: 3,\n                            power: 1.5,\n                            gas: 'nitrogen'\n                        },\n                        calculatedCost: {\n                            timePerPart: 5.2,\n                            costPerPart: 45.8,\n                            timeForAllParts: 10.4,\n                            costForAllParts: 91.6\n                        },\n                        quantity: 2\n                    },\n                    {\n                        name: '–æ—á–µ–Ω—å_–¥–ª–∏–Ω–Ω–æ–µ_–∏–º—è_—Ñ–∞–π–ª–∞_—Å_—Ä—É—Å—Å–∫–∏–º–∏_—Å–∏–º–≤–æ–ª–∞–º–∏.dxf',\n                        parsed: {\n                            totalLen: 2.300,\n                            pierceCount: 4,\n                            entities: ['circle1', 'arc1']\n                        },\n                        settings: {\n                            thickness: 2,\n                            power: 1.0,\n                            gas: 'oxygen'\n                        },\n                        calculatedCost: {\n                            timePerPart: 3.8,\n                            costPerPart: 32.5,\n                            timeForAllParts: 7.6,\n                            costForAllParts: 65.0\n                        },\n                        quantity: 2\n                    }\n                ];\n                \n                console.log('üß™ Testing enhanced PDF with Russian text and DXF icons...');\n                \n                const success = await generatePDFReport(mockState, mockLayout, mockFiles);\n                \n                if (success) {\n                    alert('‚úÖ Enhanced PDF generated successfully!\\n\\nCheck your downloads folder for:\\n‚Ä¢ Russian text (direct or transliterated)\\n‚Ä¢ DXF icons (vector or fallback)');\n                } else {\n                    alert('‚ö†Ô∏è PDF generation returned false - check console for details');\n                }\n            } catch (error) {\n                console.error('PDF test error:', error);\n                alert(`‚ùå PDF test failed: ${error.message}\\n\\nCheck console for detailed error information.`);\n            } finally {\n                button.disabled = false;\n                button.textContent = 'Generate Enhanced PDF Report';\n            }\n        };\n        \n        // Show current browser info\n        console.log('üåê Browser:', navigator.userAgent);\n        console.log('üìã Ready to test enhanced Russian PDF with DXF icons');\n    </script>\n</body>\n</html>